import streamlit as st

def display_info_page():
    st.title("💪 AI 기반 개인 맞춤형 건강 관리 웹 애플리케이션 🍎")
    
    st.markdown("<br>", unsafe_allow_html=True)
    st.header("📌 프로젝트 개요")
    st.markdown("""
    본 프로젝트는 개인의 건강 데이터를 기반으로 AI 모델이 맞춤형 운동 계획과 식단 추천을 제공하는 Streamlit 웹 애플리케이션입니다. 
    국민건강보험공단의 100만 명 건강검진정보 데이터셋을 활용하여 사용자의 건강 상태를 정확하게 분석하고, 
    최신 `google/gemma-2-9b-it` 모델을 통해 개인에게 최적화된 솔루션을 제공합니다.

    ✨ **핵심 목표:** 기존 `KoGPT2`모델의 한계를 극복하고, 딥러닝 기반으로 더욱 정확하고 개인화된 건강 관리 솔루션을 제공하는 것입니다.
    """)

    st.markdown("<br>", unsafe_allow_html=True)
    st.header("🌟 주요 기능")
    st.markdown("""
    1. 📝 **건강 데이터 입력:** 사용자 친화적인 인터페이스를 통해 기본 정보, 신체 측정, 혈압/혈당/콜레스테롤, 생활 습관 등 건강 정보를 입력합니다.
    2. 🧠 **AI 기반 예측:** 입력된 데이터를 기반으로 운동 필요성과 식단 개선 필요성을 예측합니다.
    3. 🍏 **맞춤형 운동/식단 추천:** `google/gemma-2-9b-it`을 활용하여 개인의 건강 상태와 목표에 맞는 운동 계획과 식단 정보를 제공합니다.
    4. 📊 **데이터 시각화:** 사용자의 건강 데이터를 다양한 그래프와 차트로 시각화하여 건강 상태 변화를 직관적으로 파악할 수 있습니다.
    5. 🔑 **사용자 계정 관리:** 회원가입 및 로그인 기능을 통해 개인별 건강 데이터를 안전하게 관리합니다.
    """)

    st.markdown("<br>", unsafe_allow_html=True)
    st.header("🧠 AI 모델 및 알고리즘")
    st.subheader("1. google/gemma-2-9b-it 모델")
    st.markdown("""
    ### 🌟 주요 특징

    - **모델 유형:** 대규모 언어 모델(LLM), 텍스트 생성 특화
    - **파라미터 크기:** 90억 개 (9B)
    - **아키텍처:** Transformer 기반, 자기 주의 메커니즘 사용
    - **컨텍스트 길이:** 8K 토큰 지원
    - **장점:** 
        - 다양한 건강 관련 데이터 학습으로 맥락 이해 능력 우수
        - 기존 KoGPT2 모델의 한계(JSON 변환 문제, 부적절한 답변 생성) 극복
        - 제로샷 및 퓨샷 학습 능력 보유

    ### 🚀 주요 기능

    - 대화형 응답 생성
    - 질문에 대한 답변 제공
    - 텍스트 요약
    - 코드 생성
    - 맞춤형 운동 계획 및 식단 추천 생성

    ### 📊 학습 과정

    1. **사전 학습:** 
       - 대규모 텍스트 데이터로 일반적 지식 습득
       - 다양한 주제에 대한 기본적인 이해 형성

    2. **파인튜닝:** 
       - 건강 전문가가 검증한 운동 계획 및 식단 데이터 사용
       - Hugging Face Transformers 라이브러리 활용
       - 토크나이저 설정, 모델 구성, 가중치 로딩 등 포함

    3. **프롬프트 엔지니어링:** 
       - 다양한 건강 상태와 목표에 대한 시나리오 기반 최적화
       - 사용자의 개별 상황에 맞는 맞춤형 추천 생성 능력 향상

    4. **온라인 학습:** 
       - 실시간 데이터로 지속적 업데이트
       - 최신 건강 트렌드 및 사용자 피드백 반영

    ### 🧠 모델 개선 기법

    - **지식 증류:** 더 큰 모델의 지식을 작은 모델로 효율적으로 전달
    - **로컬-글로벌 어텐션 교차:** 문맥 이해 능력 향상
    - **그룹 쿼리 어텐션:** 효율적인 정보 처리

    ### 📌 기술적 세부사항

    - **모델 저장 및 로딩:** SafeTensors 형식 사용
    - **메모리 관리:** 모델을 여러 샤드로 분할하여 효율적으로 저장 및 로드
    - **API 변경:** 'use_auth_token' 대신 'token' 인자 사용 (보안 강화)
    """)

    st.markdown("<br>", unsafe_allow_html=True)
    st.markdown("""
    ### 🏥 맞춤형 건강 관리 AI 솔루션

    본 프로젝트에서는 `google/gemma-2-9b-it` 모델을 기반으로 맞춤형 건강 관리 솔루션을 제공합니다.

    ### 🚀 주요 특징

    - **빠른 처리 속도와 향상된 성능**
    - **개인화된 운동 계획 및 식단 추천**
    - **28종의 건강 관련 데이터 처리 및 학습**
    ```
    columns = ['성별', '연령대', '나이', '키', '현재 체중', '목표 체중', '허리둘레', '총콜레스테롤',
        'HDL콜레스테롤', 'LDL콜레스테롤', '트리글리세라이드', '식전혈당(공복혈당)', '활동 수준', '흡연상태',
        '음주여부', '예측 날짜', 'BMI', '수축기혈압(최고 혈압)', '이완기혈압(최저 혈압)', '혈압 차이',
        '고혈압 위험', '고혈당 위험', '간 지표', '비만 위험 지수', '운동 개선 필요성', '운동 점수',
        '식단 개선 필요성', '식단 점수']  # 'user_id'포함하여 총 28종으로 학습 진행 처리
    ```
            
    ### 📌 데이터셋 정보
    ```
    ## 기본 정보
    - user_id : 사용자 고유 식별자
    - 성별 : 남성/여성
    - 연령대 : `나이`를 기반으로 분류 (예: 20대, 30대 등)
    - 나이 : 사용자의 실제 나이

    ## 신체 측정
    - 키 : cm 단위
    - 현재 체중 : kg 단위
    - 목표 체중 : kg 단위
    - 허리둘레 : cm 단위
    - BMI : 체질량지수, 계산식: 체중(kg) / (키(m))²

    ## 혈액 검사 결과
    - 총콜레스테롤 : mg/dL 단위
    - HDL콜레스테롤: mg/dL 단위
    - LDL콜레스테롤 : mg/dL 단위
    - 트리글리세라이드 : mg/dL 단위
    - 식전혈당(공복혈당) : mg/dL 단위

    ## 혈압 관련
    - 수축기혈압(최고 혈압) : mmHg 단위
    - 이완기혈압(최저 혈압) : mmHg 단위
    - 혈압 차이 : 수축기혈압 - 이완기혈압
    - 고혈압 위험 : 수축기혈압과 이완기혈압을 기반으로 평가

    ## 생활 습관
    - 활동 수준 : 저/중/고 활동
    - 흡연상태 : 비흡연/과거 흡연/현재 흡연
    - 음주여부 : 비음주/가끔/자주

    ## 건강 위험 평가
    - 고혈당 위험 : 식전혈당과 고혈압 위험을 고려하여 평가
    - 간 지표 : BMI와 트리글리세라이드를 고려하여 평가
    - 비만 위험 지수 : BMI, 허리둘레, 트리글리세라이드를 고려하여 계산

    ## 건강 개선 지표
    - 운동 개선 필요성 : 나이, BMI, 활동 수준 등을 고려하여 계산
    - 운동 점수 : 활동 수준을 기반으로 계산
    - 식단 개선 필요성 : BMI, 총콜레스테롤, 트리글리세라이드, 식전혈당 등을 고려하여 계산
    - 식단 점수 : 식단 개선 필요성의 역수로 계산

    ## 기타
    - 예측 날짜 : 데이터 생성 또는 예측 날짜     
    ```
                    
    ### 🧠 건강점수 계산시스템 구현
            
    1. 개별 건강 지표 평가:
       - BMI, 허리둘레, 혈압, 콜레스테롤, 고혈당 위험, 간 지표, 흡연/음주 상태, 연령 등 다양한 건강 지표를 평가합니다.
       - 각 지표마다 세분화된 기준을 적용하여 4~10점 사이의 점수를 부여합니다.
            
    2. 성별 특화 평가:
       - 허리둘레 평가에서 성별에 따라 다른 기준을 적용합니다.
            
    3. 종합 점수 계산:
       - 각 지표의 점수를 합산하여 전체 건강 점수를 산출합니다.
            
    4. AI 모델 통합:
       - predict_health_score 함수를 통해 AI 모델의 예측 결과를 반영합니다.
            
    5. 맞춤형 가중치 적용:
       - 운동과 식단 추천에 대해 다른 가중치를 적용합니다.
         - 운동: AI 모델 30%, 건강 정보 70%
         - 식단: AI 모델 20%, 건강 정보 80%
            
    6. 보정 기능:
       - calibration_factor를 통해 모델 예측을 미세 조정할 수 있습니다.
             
    ### 📊 데이터 시각화
            
    - 사용자의 건강 데이터를 다양한 그래프와 차트로 시각화하여 건강 상태 변화를 직관적으로 파악할 수 있습니다.
    - 사용자의 건강 점수와 예측 결과를 한 눈에 확인할 수 있습니다.
    - 사용자의 건강 데이터를 기반으로 AI 모델이 예측한 운동과 식단 추천 및 건강 상태 변화를 시각화합니다.
    """)
    
    st.markdown("<br>", unsafe_allow_html=True)
    st.header("🧬 알레르기 및 식품 제한 처리 시스템")
    st.markdown("""
        - **목적:** 사용자의 알레르기 정보를 고려한 안전한 식단 추천
                
              
                알레르기 정보
                알레르기 정보: 사용자의 알레르기 정보를 입력받아 처리합니다.
                '계란': ['계란', '계란노른자', '계란흰자', '에그','스크램블 에그','달걀', '노른자', '흰자', '마요네즈', '메렝게', '타르타르 소스'],
                '생선': ['생선', '연어', '참치', '광어', '고등어', '멸치', '오징어', '문어', '조개', '굴', '홍합'],
                '우유': ['우유', '유제품', '우유단백질', '우유당', '치즈', '요구르트', '버터', '크림', '아이스크림', '카제인'],
                '밀': ['밀', '밀가루', '글루텐', '파스타', '빵', '과자', '케이크', '시리얼', '맥주'],
                '콩': ['콩', '두부', '콩나물', '된장', '간장', '미소', '템페', '에다마메'],
                '견과류': ['아몬드', '호두', '땅콩', '캐슈넛', '피스타치오', '마카다미아', '헤이즐넛', '피칸'],
                '갑각류': ['새우', '게', '랍스터', '가재', '크랩스틱'],
                '과일': ['복숭아', '사과', '배', '키위', '망고', '파인애플', '딸기', '오렌지'],
                '육류': ['닭고기', '소고기', '돼지고기', '양고기', '오리고기'],
                '해산물': ['조개류', '굴', '홍합', '전복', '오징어', '문어'],
                '견과류 및 씨앗': ['참깨', '들깨', '해바라기씨', '호박씨', '아마씨'],
                '채소': ['셀러리', '당근', '토마토', '시금치', '브로콜리'],
                '향신료': ['마늘', '양파', '생강', '고추', '후추'],
                '기타': ['초콜릿', '카카오', '커피', '알코올', '알콜','인공감미료', '방부제']
             
                                
  
    - **주요 기능:**
                
        1. **알레르기 확장:** 입력된 알레르기 항목을 관련 식품군으로 확장
        2. **교차 반응성 고려:** 알레르기 간 교차 반응을 고려한 식품 제외
        3. **대체 식품 추천:** 제외된 식품 대신 영양학적으로 유사한 대체 식품 제안
                
    - **데이터베이스:** 광범위한 알레르기-식품 매핑 정보 포함
    - **지속적 업데이트:** 새로운 알레르기 정보 및 식품 데이터로 주기적 갱신
                
      """)
    st.markdown("<br>", unsafe_allow_html=True)
    st.header("🚀 기술 스택")
    st.markdown("""
    - 🐍 **Python:** 웹 애플리케이션 개발의 핵심 언어
    - 🎈 **Streamlit:** 사용자 친화적인 인터페이스를 위한 웹 프레임워크
    - 🤗 **Hugging Face Transformers:** `google/gemma-2-9b-it`모델 통합
    - 📈 **Plotly:** 인터랙티브 데이터 시각화
    """)

    st.markdown("<br>", unsafe_allow_html=True)
    st.header("🎯 성능 지표")
    st.markdown("""
    - XGBClassifier 활용하여 운동 필요성과 식단 개선 필요성 예측
    - 운동 개선 필요성 예측 정확도: 95.78%
    - 식단 개선 필요성 예측 정확도: 84.74%
    - 사용자 만족도: 4.8/5.0 (베타 테스트 기준)
    """)

    st.markdown("""
    이 혁신적인 AI 기반 건강 관리 시스템은 개인의 건강 데이터, 알레르기 정보, 그리고 최신 AI 기술을 결합하여
    사용자에게 안전하고 효과적인 맞춤형 건강 솔루션을 제공합니다. Gemma-2 모델의 강력한 성능과 세밀한 프롬프트 엔지니어링을 통해,
    사용자의 건강 상태와 목표에 최적화된 운동 계획과 식단 추천을 제공할 수 있게 되었습니다.
    """)

    st.markdown("---")

    github_url = "https://github.com/mybear1109/bmi_app/blob/main/README.md"

    st.markdown(f"""
    <a href="{github_url}" target="_blank">
        <button style="
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 12px;">
            🚀 자세한 정보 보기
        </button>
    </a>
    """, unsafe_allow_html=True)